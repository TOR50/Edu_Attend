{% extends 'base.html' %}
{% load static %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'css/admin_dashboard.css' %}">
{% endblock %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="header-container">
    <h1>Admin Dashboard</h1>
</div>

<div class="grid-container">
    <div class="card">
        <div class="card-header">Add New Student</div>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {% for field in form %}
                <div class="form-group">
                    {{ field.label_tag }}
                    {{ field }}
                </div>
            {% endfor %}
            <button class="btn-primary" type="submit">Add Student</button>
        </form>
    </div>

    <div class="card">
        <div class="card-header">All Classes</div>
        <ul class="list-group">
            {% for c in classes %}
                <li class="list-group-item">Class {{ c.grade }}-{{ c.section }}</li>
            {% empty %}
                <li class="list-group-item">No classes yet</li>
            {% endfor %}
        </ul>
    </div>
</div>

<div class="card" style="margin-top: 30px;">
    <div class="card-header">All Students</div>
    <table class="table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Class</th>
                <th>Photo</th>
                <th>Face Encoding</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for s in students %}
            <tr>
                <td>{% if s.id %}<a href="{% url 'student_detail' s.id %}">{{ s.get_full_name }}</a>{% else %}{{ s.get_full_name }}{% endif %}</td>
                <td>{{ s.school_class }}</td>
                <td>{% if s.photo %}<img src="{{ s.photo.url }}" height="40" style="border-radius: 4px;"/>{% else %}-{% endif %}</td>
                <td>{% if s.face_encodings %}Yes{% else %}No{% endif %}</td>
                <td>{% if s.id %}<a href="{% url 'student_detail' s.id %}" class="btn-sm btn-primary">View</a>{% endif %}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}